---
import Text from "@/components/fundations/elements/Text.astro";
import { useTranslations, getLangFromUrl, getLangPrefix } from '@/i18n/utils';
import { getGradientForId } from '@/lib/utils/gradients';

interface Props {
  href: string;
  label?: string;
  variant?: 'resource' | 'wallpaper' | 'news';
}

const { href, label, variant = 'resource' } = Astro.props;
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const displayLabel = label || t('common.view') + ' all';

const isWallpaper = variant === 'wallpaper';
const isNews = variant === 'news';

// Générer un gradient subtil pour la carte "more"
const gradient = getGradientForId(href);
const gradientStyle = `background: linear-gradient(135deg, ${gradient.from} 0%, ${gradient.to} 100%);`;
---

<a
  href={href}
  class="group relative flex flex-col rounded-lg border border-base-200 dark:border-base-700 bg-base-50 dark:bg-base-100 dark:bg-base-200 overflow-hidden hover:border-accent-300 dark:hover:border-accent-500 hover:shadow-lg transition-all"
>
  {isWallpaper ? (
    <>
      <div class="aspect-[3/5] w-full overflow-hidden flex items-center justify-center opacity-60" style={gradientStyle}>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="48"
          height="48"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="icon icon-tabler icons-tabler-outline icon-tabler-plus text-base-50 group-hover:opacity-100 transition-opacity"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M12 5l0 14"></path>
          <path d="M5 12l14 0"></path>
        </svg>
      </div>
      <div class="p-4 flex-1 flex items-center justify-center">
        <Text tag="span" variant="textBase" class="font-semibold text-base-600 dark:text-base-400 group-hover:text-accent-500 dark:group-hover:text-accent-400 dark:group-hover:text-accent-400 transition-colors text-center">
          {displayLabel}
        </Text>
      </div>
    </>
  ) : isNews ? (
    <>
      <div class="aspect-video w-full overflow-hidden rounded-md mb-3 flex items-center justify-center opacity-60" style={gradientStyle}>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="48"
          height="48"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="icon icon-tabler icons-tabler-outline icon-tabler-plus text-base-50 group-hover:opacity-100 transition-opacity"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M12 5l0 14"></path>
          <path d="M5 12l14 0"></path>
        </svg>
      </div>
      
      <div class="flex-1 flex items-center justify-center">
        <Text tag="span" variant="textBase" class="font-semibold text-base-600 dark:text-base-400 group-hover:text-accent-500 dark:group-hover:text-accent-400 transition-colors">
          {displayLabel}
        </Text>
      </div>
    </>
  ) : (
    <>
      <div class="aspect-video w-full overflow-hidden rounded-md mb-3 flex items-center justify-center opacity-60" style={gradientStyle}>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="48"
          height="48"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="icon icon-tabler icons-tabler-outline icon-tabler-plus text-base-50 group-hover:opacity-100 transition-opacity"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M12 5l0 14"></path>
          <path d="M5 12l14 0"></path>
        </svg>
      </div>
      
      <div class="flex-1 flex items-center justify-center">
        <Text tag="span" variant="textBase" class="font-semibold text-base-600 dark:text-base-400 group-hover:text-accent-500 dark:group-hover:text-accent-400 transition-colors">
          {displayLabel}
        </Text>
      </div>
    </>
  )}
</a>

