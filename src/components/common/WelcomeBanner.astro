---
import Text from "@/components/fundations/elements/Text.astro";
import { useTranslations, getLangFromUrl } from '@/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<div
  x-data="{ 
    show: false,
    init() {
      // VÃ©rifier si l'utilisateur a dÃ©jÃ  fermÃ© la banniÃ¨re
      const dismissed = localStorage.getItem('welcomeBannerDismissed');
      if (!dismissed) {
        // Afficher aprÃ¨s un court dÃ©lai pour une meilleure UX
        setTimeout(() => {
          this.show = true;
        }, 1000);
      }
    },
    close() {
      this.show = false;
      localStorage.setItem('welcomeBannerDismissed', 'true');
    }
  }"
  x-show="show"
  x-transition:enter="transition ease-out duration-300"
  x-transition:enter-start="transform translate-y-full opacity-0"
  x-transition:enter-end="transform translate-y-0 opacity-100"
  x-transition:leave="transition ease-in duration-200"
  x-transition:leave-start="transform translate-y-0 opacity-100"
  x-transition:leave-end="transform translate-y-full opacity-0"
  style="display: none;"
  class="fixed bottom-0 left-0 right-0 z-50 p-4 lg:p-6"
>
  <div class="max-w-4xl mx-auto bg-base-900 text-white rounded-lg shadow-xl border border-base-200 p-4 lg:p-6 flex items-center justify-between gap-4">
    <div class="flex items-center gap-3 lg:gap-4 flex-1">
      <span class="text-2xl lg:text-3xl" aria-hidden="true">ðŸŽ‰</span>
      <div class="flex-1">
        <Text tag="p" variant="textSM" class="font-semibold text-white mb-1">
          {t('welcome.title')}
        </Text>
        <Text tag="p" variant="textXS" class="text-base-300">
          {t('welcome.message')}
        </Text>
      </div>
    </div>
    <button
      @click="close()"
      class="shrink-0 text-white hover:text-base-300 focus:outline-none transition-colors p-2 -mr-2"
      aria-label="Close welcome banner"
    >
      <svg
        class="size-5"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        aria-hidden="true"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        ></path>
      </svg>
    </button>
  </div>
</div>

