---
export const prerender = false; // Page avec paramètre [lang] dynamique, nécessite SSR

// Layout
import BaseLayout from "@/layouts/BaseLayout.astro";
// Fundation
import Text from "@/components/fundations/elements/Text.astro";
import Button from "@/components/fundations/components/Button.astro";
import Link from "@/components/fundations/components/Link.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";
import BuyMeACoffee from "@/components/common/BuyMeACoffee.astro";
import Seo from "@/components/fundations/head/Seo.astro";
import { useTranslations } from '@/i18n/utils';
import { normalizeSiteUrl } from '@/lib/utils/url';
import type { Lang } from '@/i18n/utils';

const lang = (Astro.params.lang || 'en') as Lang;
const t = useTranslations(lang);
const siteUrl = normalizeSiteUrl(Astro.site);

---

<BaseLayout>
  <Fragment slot="head">
    <Seo
      title={`${t('about.title')} - ${t('site.name')}`}
      description={t('about.description')}
      canonical={`${siteUrl}/${lang}/about`}
      lang={lang}
    />
  </Fragment>

  <section>
    <Wrapper variant="hero">
      <div class="flex items-start gap-3 mb-4">
        <div class="flex-shrink-0 w-10 h-10 bg-base-200 rounded-lg flex items-center justify-center">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="text-base-700"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M12 2l.324 .005a10 10 0 1 1 -.648 0l.324 -.005z"></path>
            <path d="M12 8v4"></path>
            <path d="M12 16h.01"></path>
          </svg>
        </div>
        <div class="flex-1">
          <Text
            tag="h1"
            variant="displaySM"
            class="text-base-900 font-medium 2xl:text-5xl tracking-tight"
          >
            {t('about.title')}
          </Text>
          <Text
            tag="p"
            variant="textBase"
            class="mt-4 text-base-600 text-balance 2xl:text-xl"
          >
            {t('about.subtitle')}
          </Text>
        </div>
      </div>
    </Wrapper>
  </section>

  <section>
    <Wrapper variant="standard" class="py-6 pb-24">
      <div class="max-w-3xl mx-auto space-y-8">
        <!-- What is this site -->
        <div>
          <Text tag="h2" variant="textLG" class="text-base-900 font-bold mb-4">
            {t('about.what.title')}
          </Text>
          <Text tag="p" variant="textBase" class="text-base-700 mb-4">
            {t('about.what.content')}
          </Text>
          <Text tag="p" variant="textBase" class="text-base-700">
            {t('about.what.content2')}
          </Text>
        </div>

        <!-- Links -->
        <div>
          <Text tag="h2" variant="textLG" class="text-base-900 font-bold mb-4">
            {t('about.links.title')}
          </Text>
          <div class="space-y-4">
            <!-- Official Subreddit -->
            <div class="flex items-start gap-4 p-4 border border-base-200 rounded-lg hover:border-accent-300 transition-colors">
              <div class="flex-shrink-0 w-10 h-10 bg-base-100 rounded-lg flex items-center justify-center">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="text-base-700"
                >
                  <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 3.007.913.522 0 2.165-.07 3.007-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.547-1.684.73-2.572.73-.888 0-2.025-.183-2.572-.73a.326.326 0 0 0-.094-.231z"/>
                </svg>
              </div>
              <div class="flex-1">
                <Text tag="h3" variant="textBase" class="font-semibold text-base-900 mb-1">
                  {t('about.links.subreddit.title')}
                </Text>
                <Text tag="p" variant="textSM" class="text-base-600 mb-3">
                  {t('about.links.subreddit.description')}
                </Text>
                <Link
                  href="https://www.reddit.com/r/xteinkereader/"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="inline-flex items-center gap-2 text-accent-500 hover:text-accent-600 font-medium"
                >
                  <span>r/xteinkereader</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                    <polyline points="15 3 21 3 21 9"></polyline>
                    <line x1="10" y1="14" x2="21" y2="3"></line>
                  </svg>
                </Link>
              </div>
            </div>

            <!-- Official Website -->
            <div class="flex items-start gap-4 p-4 border border-base-200 rounded-lg hover:border-accent-300 transition-colors">
              <div class="flex-shrink-0 w-10 h-10 bg-base-100 rounded-lg flex items-center justify-center">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-base-700"
                >
                  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                  <polyline points="15 3 21 3 21 9"></polyline>
                  <line x1="10" y1="14" x2="21" y2="3"></line>
                </svg>
              </div>
              <div class="flex-1">
                <Text tag="h3" variant="textBase" class="font-semibold text-base-900 mb-1">
                  {t('about.links.website.title')}
                </Text>
                <Text tag="p" variant="textSM" class="text-base-600 mb-3">
                  {t('about.links.website.description')}
                </Text>
                <Link
                  href="https://xteink.com"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="inline-flex items-center gap-2 text-accent-500 hover:text-accent-600 font-medium"
                >
                  <span>xteink.com</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                    <polyline points="15 3 21 3 21 9"></polyline>
                    <line x1="10" y1="14" x2="21" y2="3"></line>
                  </svg>
                </Link>
              </div>
            </div>

            <!-- Creator Reddit Profile -->
            <div class="flex items-start gap-4 p-4 border border-base-200 rounded-lg hover:border-accent-300 transition-colors">
              <div class="flex-shrink-0 w-10 h-10 bg-base-100 rounded-lg flex items-center justify-center">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="text-base-700"
                >
                  <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 3.007.913.522 0 2.165-.07 3.007-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.547-1.684.73-2.572.73-.888 0-2.025-.183-2.572-.73a.326.326 0 0 0-.094-.231z"/>
                </svg>
              </div>
              <div class="flex-1">
                <Text tag="h3" variant="textBase" class="font-semibold text-base-900 mb-1">
                  {t('about.links.creator.title')}
                </Text>
                <Text tag="p" variant="textSM" class="text-base-600 mb-3">
                  {t('about.links.creator.description')}
                </Text>
                <Link
                  href="https://www.reddit.com/user/iamkxrz/"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="inline-flex items-center gap-2 text-accent-500 hover:text-accent-600 font-medium"
                >
                  <span>u/iamkxrz</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                    <polyline points="15 3 21 3 21 9"></polyline>
                    <line x1="10" y1="14" x2="21" y2="3"></line>
                  </svg>
                </Link>
              </div>
            </div>
          </div>
        </div>

        <!-- Funding -->
        <div id="funding" class="border-t border-base-200 pt-8">
          <Text tag="h2" variant="textLG" class="text-base-900 font-bold mb-4">
            {t('about.funding.title')}
          </Text>
          <Text tag="p" variant="textBase" class="text-base-700 mb-4">
            {t('about.funding.content')}
          </Text>
          <Text tag="p" variant="textBase" class="text-base-700 mb-6">
            {t('about.funding.content2')}
          </Text>
          <div class="flex items-center justify-center py-8 bg-base-50 rounded-lg border border-base-200 relative overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-r from-accent-500/20 via-accent-400/20 to-accent-500/20 blur-2xl animate-pulse"></div>
            <div class="relative z-10">
              <a
                href="https://donate.stripe.com/28EdR9gtc9Sca4IfP94Vy00"
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center gap-2 px-6 py-3 bg-accent-500 text-white rounded-lg font-semibold shadow-lg hover:bg-accent-600 hover:shadow-xl transition-all hover:scale-105"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="shrink-0"
                >
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                  <path d="M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"></path>
                  <path d="M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"></path>
                  <path d="M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"></path>
                  <path d="M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"></path>
                  <path d="M16.746 16.726a3 3 0 1 0 .252 -4.202"></path>
                </svg>
                <span>{t('common.buy_me_coffee')}</span>
              </a>
            </div>
          </div>
        </div>

        <!-- Disclaimer -->
        <div class="bg-base-50 border-l-4 border-base-900 p-6 rounded-r-lg">
          <Text tag="p" variant="textSM" class="text-base-700">
            {t('about.disclaimer')}
          </Text>
        </div>
      </div>
    </Wrapper>
  </section>
</BaseLayout>

